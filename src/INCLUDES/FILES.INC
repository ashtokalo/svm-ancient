 ;---------------------------------------------------------------------------
 ;                                 Files
 ;                               Version 1.0
 ;                      Copyright (C) 1999 ShAG Studio
 ;---------------------------------------------------------------------------
 ;    Этот  модуль  предназначен  для  работы с файлами. При работе с файл, в
 ; должны  учитывать  следующее:  файл  -  это  поток информации, из которого
 ; можно  читать,  в  который  можно писать; каталог - файл, который содержит
 ; описание  файлов,  из  него  нельзя  читать и в него нелбзя писать; диск -
 ; это  устройство для хранения файлов, вы можете получить только общий объем
 ; диска  и  объем свободного пространства на нем. Учитывая все это вы должны
 ; понять,  что данный модуль не содержит команд для чтения и записи в файлы,
 ; так  как  они являются стандартными потоками. Поэтому для этих операций вы
 ; должны использовать команды работы с потоками.
 ;
 ; Список процедур доступных для вызова:
 ;  DiskSize         - Получить объем диска в байтах
 ;  DiskFree         - Получить объем свободного пространства на диске в байтах
 ;  CreatFileStream  - Создать поток для работы с файлом
 ;  RenameFile       - Переименовать файл
 ;  EraseFile        - Удалить файл
 ;  CopyFile         - Копировать файл
 ;
 ;    Чтобы использовать этот модуль вы должны вставить в свою программу
 ; следующюю строку: INCLUDE Files.inc  или добавить через запятую, если
 ; директива INCLUDE уже где-то использовалась.
 ;---------------------------------------------------------------------------

 ;---------------------------------------------------------------------------
 ; DiskSize        - Получить объем диска в байтах
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  BX - Номер диска (0-A,1-B,2-C,3-D ...)
 ; Выход:
 ;  LBX - Обеъм диска в байтах
 ; Регистры:
 ;  LBX
 ;---------------------------------------------------------------------------
 PROC DiskSize
  PUSH LAX
  MOV  LAX, 0
  CSP  2
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; DiskFree        - Получить объем свободного пространства на диске в байтах
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  BX - Номер диска (0-A,1-B,2-C,3-D ...)
 ; Выход:
 ;  LBX - Обеъм свободного пространства на диске в байтах
 ; Регистры:
 ;  LBX
 ;---------------------------------------------------------------------------
 PROC DiskFree
  PUSH LAX
  MOV  LAX, 1
  CSP  2
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; CreatFileStream - Создать поток для работы с файлом
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  BX  - Тип создаваемого потока:
 ;        0 - открыть файл для чтения
 ;        1 - открыть файл для дозаписи
 ;        2 - открыть файл для записи, если файл отсутствует - создается новый
 ;  LEP - Адрес имени файла
 ; Выход:
 ;  LDX - Номер созданного потока. Его надо где-то сохранить, чтобы потом
 ;        вы смогли работать с этим потоком. Хотя SVM после окончания работы
 ;        программы и закрывает все используемые потоки, желательно все
 ;        созданные потоки закрывать перед окончанием своей программы, для
 ;        избежания ошибок в работе SVM.
 ; Регистры:
 ;  BX, LDX, LEP
 ;---------------------------------------------------------------------------
 PROC CreatFileStream
  PUSH LAX
  MOV  LAX, BX
  ADD  LAX, 2
  CSP  2
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; RenameFile      - Переименовать файл
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - Адрес первоночального имени файла
 ;  LFP - Адрес нового имени файла
 ; Выход:
 ;  нет
 ; Регистры:
 ;  LEP, LFP
 ;---------------------------------------------------------------------------
 PROC RenameFile
  PUSH LAX
  MOV  LAX, 5
  CSP  2
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; EraseFile       - Удалить файл
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - Адрес имени удаляемого файла
 ; Выход:
 ;  нет
 ; Регистры:
 ;  LEP
 ;---------------------------------------------------------------------------
 PROC EraseFile
  PUSH LAX
  MOV  LAX, 6
  CSP  2
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; CopyFile        - Копировать файл
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - Адрес имени копируемого файла
 ;  LFP - Адрес имени создаваемого из копии файла
 ; Выход:
 ;  нет
 ; Регистры:
 ;  LEP, LFP
 ;---------------------------------------------------------------------------
 PROC EraseFile
  PUSH LAX
  MOV  LAX, 14
  CSP  2
  POP  LAX
  RET



 ;---------------------------------------------------------------------------
 ;                                 Strings
 ;                               Version 1.0
 ;                      Copyright (C) 1999 ShAG Studio
 ;---------------------------------------------------------------------------
 ;    Этот  модуль содержит  процедуры  для  работы  с  ASCIIZ строками. Для
 ; повышения производительности,  эти  процедуры интегрированы в виртуальную
 ; машину.
 ;
 ; Список процедур доступных для вызова:
 ;    Length       - возвращает длинну строки
 ;    Copy         - копирует строку с одного места на ругое
 ;    Pos          - возвращает номер позиции подстроки в строке
 ;    Delete       - удаляет подстроку из строки
 ;    Insert       - вставляет одну строку в другую
 ;    CMPString    - сравнивает две строки
 ;
 ;    Чтобы  использовать этот модуль вы должны вставить в свою программу
 ; следующюю строку: INCLUDE Strings.inc или добавить через запятую, если
 ; директива INCLUDE уже где-то использовалась.
 ;---------------------------------------------------------------------------

 NewString DB 10,13,0 ;Строка переводит курсор на следующюю строку

 ;---------------------------------------------------------------------------
 ; Copy - копирует строку с одного места на другое
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - адрес строки, откуда будет скопирована подстрока
 ;  LFP - адрес строки, куда будет скопирована подстрока
 ;  LDX - копировать из строки LEP начиная с этой позиции
 ;  LCX - количество копируемых символов
 ; Выход:
 ;  нет
 ; Регистры:
 ;  LEP, LPF, LDX, LCX
 ;---------------------------------------------------------------------------
 PROC Copy
  PUSH LAX
  MOV  LAX, 1
  CSP  5
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; Length - возвращает длинну строки
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - адрес строки источника
 ; Выход:
 ;  LCX - содержит длинну строки без учета последнего нуля
 ; Регистры:
 ;  LCX, LEP
 ;---------------------------------------------------------------------------
 PROC Length
  PUSH LAX
  MOV  LAX, 0
  CSP  5
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; Insert - вставляет одну строку в другую
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - адрес главной строки
 ;  LFP - адрес вставляемой строки
 ;  LDX - номер символа, начиная с которого надо вставить строку LFP
 ; Выход:
 ;  В конец строки EP прибавляется строка FP
 ; Регистры:
 ;  LEP, LFP, LDX
 ;---------------------------------------------------------------------------
 PROC Insert
  PUSH LAX
  MOV  LAX, 4
  CSP  5
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; Pos - возвращает номер позиции подстроки в строке
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - адрес строки
 ;  LFP - адрес подстроки
 ; Выход:
 ;  LDX - номер символа, с которого начинается подстрока LFP в строке LEP
 ; Регистры:
 ;  LEP, LFP, LDX
 ;---------------------------------------------------------------------------
 PROC Pos
  PUSH LAX
  MOV  LAX, 2
  CSP  5
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; Delete - удаляет подстроку из строки
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - адрес строки
 ;  LDX - номер символа начиная с которого надо удалять подстроку
 ;  LCX - количество удаляесых символов
 ; Выход:
 ;  нет
 ; Регистры:
 ;  LEP, LDX, LCX
 ;---------------------------------------------------------------------------
 PROC Delete
  PUSH LAX
  MOV  LAX, 3
  CSP  5
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ; FillString - заполняет строку символами
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - адрес строки
 ;  LDX - номер символа, начиная с которого надо заполнять строку
 ;  LCX - количество символов, которое надо заполнить
 ;  BL  - код символа, для заполнения
 ; Выход:
 ;  нет
 ; Регистры:
 ;  LEP, LDX, LCX, BL
 ;---------------------------------------------------------------------------
 PROC FillString
  PUSH LAX
  MOV  LAX, 5
  CSP  5
  POP  LAX
  RET


 ;---------------------------------------------------------------------------
 ; CMPString - сравнивает две строки
 ;---------------------------------------------------------------------------
 ; Вход:
 ;  LEP - адрес первой строки
 ;  LFP - адрес второй строки
 ; Выход:
 ;  результат можно определить с помощью команд JE(JNE), JL(JNL), JG(JNG)
 ; Регистры:
 ;  LEP, LFP
 ;---------------------------------------------------------------------------
 PROC CMPString
  PUSH LAX
  MOV  LAX, 6
  CSP  5
  POP  LAX
  RET

 ;---------------------------------------------------------------------------
 ;                                SVM Strings
 ;---------------------------------------------------------------------------